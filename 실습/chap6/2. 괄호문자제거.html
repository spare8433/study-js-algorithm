<html>
  <head>
    <meta charset="UTF-8" />
    <title>출력결과</title>
  </head>
  <body>
    <script>
      function solution(s) {
        let answer;
        let stack = [];

        // 문자열만큼 순회
        for (let i = 0; i < s.length; i++) {
          let word = s[i];

          // 현재 문자가 ")" 인 경우
          if (word === ")") {
            // j : stack 의 lastIndex 를 의미
            let j = stack.length - 1;

            // 현재 스택에서 부터 "("  나오기 전까지의 문자를 삭제
            while (stack[j--] !== "(") {
              stack.pop();
            }

            // "(" 문자 추출
            stack.pop();
            continue;
          }

          // 현재 문자가 ")" 아닌 모든 문자를 stack 에 push 해 저장
          stack.push(word);
          console.log(stack);
        }

        // 답안지 참고 간소화 버전
        // for (let x of s) {
        //   if (x === ")") {
        //     // stack 에서 pop 하여 꺼낸 값이 "(" 나오는지 체크 한 후 앞선 pop 하여 체크하는 과정을 반복해
        //     // 결과적으로 stack 에서 괄호사이의 문자들이 제외
        //     while (stack.pop() !== "(");
        //   } else stack.push(x);
        // }

        // 문자열로 치환
        answer = stack.join("");
        return answer;
      }

      let str = "(A(BC)D)EF(G(H)(IJ)K)LM(N)";
      console.log(solution(str));
    </script>
  </body>
</html>
