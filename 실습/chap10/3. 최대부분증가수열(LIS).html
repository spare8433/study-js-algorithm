<html>
  <head>
    <meta charset="UTF-8" />
    <title>출력결과</title>
  </head>
  <body>
    <script>
      function solution(arr) {
        let answer = 0;
        let stack = [arr[0]]; // 부분 증가 수열을 저장할 배열
        let min = 0; // stack의 마지막 원소 바로 이전 원소의 값을 저장할 변수

        for (let i = 1; i < arr.length; i++) {
          let current = stack.pop(); // 마지막 원소값을 꺼내 current 변수에 저장

          // current 변수 보다 arr 배열의 i 번째 원소보다 큰 경우
          if (arr[i] > current) {
            stack.push(current); // 기존 원소를 stack 배열에 추가
            stack.push(arr[i]); // arr[i] 원소를 stack 배열에 추가
            min = current;
          } else {
            // current 변수 보다 arr 배열의 i 번째 원소보다 작거나 같은 경우
            // 이전 원소 min 값보다 크다면 기존 원소값(current)을 제외하고 arr[i] 원소 값을 추가
            if (arr[i] > min) stack.push(arr[i]);
            // 이전 원소 min 값보다 작다면 증가 수열에 해당하지 않게 되므로 기존 원소값(current)만을 stack 배열에 추가
            else stack.push(current);
          }

          console.log("num:", arr[i], "min:", min, "stack:", ...stack);
        }

        console.log(stack);

        return (answer = stack.length);
      }

      // let arr = [5, 3, 7, 8, 6, 2, 9, 4];
      let arr = [2, 7, 5, 8, 6, 4, 7, 12, 3];
      console.log(solution(arr));
    </script>
  </body>
</html>
