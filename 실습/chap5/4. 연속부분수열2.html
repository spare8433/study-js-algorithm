<html>
  <head>
    <meta charset="UTF-8" />
    <title>출력결과</title>
  </head>
  <body>
    <script>
      function solution(m, arr) {
        let answer = 0,
          sum = 0,
          answerArr = []; // 연속부분수열 확인용 배열

        // 수열을 의미하는 배열을 순회
        arr.forEach((element, index, array) => {
          // index 번의 숫자를 기준으로 마지막 숫자까지 순회
          for (let i = index; i < array.length; i++) {
            sum += array[i];
            // 기준 숫자와 이후 숫자들과 합을 확인하여 m 을 넘지 않는 경우 즉 정답에 해당하는 연속 부분수열을 저장
            if (sum <= m) {
              answerArr.push(array.slice(index, i + 1));
              answer++;
            } else break; // 숫자를 넘어가면 기준숫자로 만들수 있는 연속 부분수열을 없음을 의미하므로 반복을 멈춘다
          }
          sum = 0;
        });

        console.log(answerArr);
        return answer;
      }

      // 다른 풀이 (답안지)
      // 아이디어
      // 투포인터알고리즘으로 연속된 수열의 값의 처음과 끝 인덱스를 저장할 두 포인터를 활용
      // 포인터를 기준으로 수열의 합이 특정숫자 M이하가 되는 경우를 구함
      function solution(m, arr) {
        let answer = 0,
          sum = 0,
          lt = 0;
        for (let rt = 0; rt < arr.length; rt++) {
          sum += arr[rt];
          while (sum > m) {
            sum -= arr[lt++];
          }
          answer += rt - lt + 1;
          // rt - lt + 1 의 의미를 자세하게 짚어본다면 왜 rt - lt + 1 을 더하는가?
          // 위 코드는 sum > m 을 넘지 않는 lt, rt 인덱스를 기준으로 이전에 추가한 중복된 경우의 수를 제외한 부분수열이 되는 경우의 수를 값에 추가하고 있다.
          // 예시로 lt=0 rt=0 의 경우 수열 {1} 을 의미하며 부분수열은 {1} 1개 이다
          // lt=0 rt=1 의 경우 {1, 2} 을 의미하며 부분수열은 {1}, {1,3}, {3} 위 경우의 수 중복을 제외하면 2개이다.
          // lt=0 rt=2 의 경우 {1, 3, 1} 을 의미하며 부분수열은 {1}, {1,3}, {3}, {1}, {3,1}, {1,3,1} 경우의 수는 총 6개이다 위 경우의 수 중복을 제외하면 3 개이다.
          // lt=0 rt=2 의 경우에서 중복을 제외한 값 {1}, {3,1}, {1,3,1} 잘 살펴보면
          // 중복된 값이 아닌 경우의 수를 생각해보면 간단하게 rt 인덱스의 수열의 값 {1} 이 포함한 연속된 부분 수열만 생각하면 된다.
          // rt 숫자 앞까지에 연속될 수 있는 숫자조합 여기선 {1,3}, {3} 이고 두가지 경우의 수에 {1} 붙이는 경울를 생각하면 {3,1}, {1,3,1} 두가지 경우의 수가 나오고
          // 자기자신으로 하는 부분수열 {1} 까지 포함해서 {1}, {3,1}, {1,3,1} 총 3가지가 가능하다
          // 이걸 수식으로 풀면 `rt - lt` 는 즉 lt 부터 rt 전까지 중 중복이 되지않는 rt와 연속될 수 있는 경우의 수를 의미하게 되고 `+ 1` 은 rt 번째 숫자 단일로 가능한 경우의 수 1개를 합친것을 의미할 수 있다.
          // (물론 lt 부터 rt 번째 숫자까지 연속될 수 있는 숫자를 표현하기 위해 rt 의 인덱스 값을 1 증가하기 위함으로 봐도 같은 맥락이라고 생각한다.)
          // 다른 예시를 들면 m = 100 이고 [1,2,3,4,5,6,7,8] 이런 수열에서 lt=0 rt=4 인 상황에서 rt=5 되는 경우 중복을 제외하고 추가되는 경우의 수는
          // {6}, {5,6}, {4,5,6}, {3,4,5,6}, {2,3,4,5,6}, {1,2,3,4,5,6} 여기서 lt 부터 rt 번째 숫자들의 갯수 5는 rt 번째 숫자와 연속될 수 있는 경우의 수와 같다.
          // 거기에 자기자신이 부분수열이 되는 경우의 수 +1 해주숴 6가지의 경우의 수를 계산할 수 있는데 수식으로 보면
          // rt - lt + 1 수식이 (5 - 0) + 1 = 6 와 같이 적용됨을 알 수 있다.
        }
        return answer;
      }

      let a = [1, 3, 1, 2, 3];
      console.log(solution(5, a));
    </script>
  </body>
</html>
